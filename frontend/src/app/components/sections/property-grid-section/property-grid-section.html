<section class="properties-section" [ngStyle]="styleConfig">
  <div class="container">
    <div class="section-header-inline">
      <b class="section-title">{{ title }}</b>

      <a *ngIf="showViewAll" routerLink="/buscar" class="btn-view-all">
        Ver todos
        <i class="fas fa-arrow-right"></i>
      </a>
    </div>

    <div *ngIf="loading" class="properties-grid">
      <div *ngFor="let i of skeletonItems" class="skeleton-card">
        <div class="skeleton skeleton-image"></div>
        <div class="skeleton-content">
          <div class="skeleton skeleton-line"></div>
          <div class="skeleton skeleton-line short"></div>
        </div>
      </div>
    </div>

    <swiper-container 
      #swiperRef
      *ngIf="!loading && !error && showCarousel" 
      class="property-swiper"
      init="false"
    >
      <swiper-slide *ngFor="let property of properties">
        <app-property-card [property]="property"></app-property-card>
      </swiper-slide>
    </swiper-container>

    <div class="carousel-nav" *ngIf="!loading && !error && showCarousel && !isMobile">
      <button class="nav-btn prev" (click)="swiperPrev()">
        <i class="fas fa-chevron-left"></i>
      </button>
      <button class="nav-btn next" (click)="swiperNext()">
        <i class="fas fa-chevron-right"></i>
      </button>
    </div>

    <div 
      *ngIf="!loading && !error && !showCarousel" 
      class="properties-grid"
      [ngClass]="'cols-' + columns"
    >
      <app-property-card 
        *ngFor="let property of properties" 
        [property]="property"
      ></app-property-card>
    </div>

    <div *ngIf="error" class="error-message">
      <p>Erro ao carregar im√≥veis. Tente novamente mais tarde.</p>
    </div>
  </div>
</section>
