<div class="public-website">
  <div *ngIf="loading" class="loading-state">
    <p>Carregando...</p>
  </div>

  <div *ngIf="error && !loading" class="error-state">
    <h2>Erro ao carregar o site</h2>
    <p>Não foi possível carregar o layout da página.</p>
  </div>

  <div *ngIf="layout && !loading" class="website-content">
    <div 
      *ngFor="let section of layout.layout_config.sections" 
      class="section"
      [attr.data-component-type]="section.component_type"
      [ngStyle]="getSectionStyles(section)"
    >
      <!-- Header Component -->
      <div *ngIf="section.component_type === 'header'" class="component-header">
        <div class="container">
          <div class="header-content">
            <div class="logo">
              <img *ngIf="section.config['logoUrl']" [src]="section.config['logoUrl']" alt="Logo" />
              <span *ngIf="!section.config['logoUrl']">{{ section.config['companyName'] }}</span>
            </div>
            <nav class="menu">
              <a *ngFor="let item of section.config['menuItems']" href="#">{{ item }}</a>
            </nav>
          </div>
        </div>
      </div>

      <!-- Hero Component -->
      <div *ngIf="section.component_type === 'hero'" class="component-hero">
        <div class="container">
          <div class="hero-content" [style.text-align]="section.config['alignment']">
            <h1>{{ section.config['title'] }}</h1>
            <p>{{ section.config['subtitle'] }}</p>
            <a *ngIf="section.config['buttonText']" [href]="section.config['buttonLink']" class="cta-button">
              {{ section.config['buttonText'] }}
            </a>
          </div>
        </div>
      </div>

      <!-- Text Block Component -->
      <div *ngIf="section.component_type === 'text-block'" class="component-text-block">
        <div class="container">
          <h2 *ngIf="section.config['title']">{{ section.config['title'] }}</h2>
          <p>{{ section.config['content'] }}</p>
        </div>
      </div>

      <!-- Property Grid Component -->
      <div *ngIf="section.component_type === 'property-grid'" class="component-property-grid">
        <div class="container">
          <h2>Imóveis Disponíveis</h2>
          <div class="property-grid">
            <div class="property-card-placeholder">
              <p>Componente de Grade de Imóveis</p>
              <small>Imóveis serão carregados aqui</small>
            </div>
          </div>
        </div>
      </div>

      <!-- Contact Form Component -->
      <div *ngIf="section.component_type === 'contact-form'" class="component-contact-form">
        <div class="container">
          <h2>{{ section.config['title'] || 'Entre em Contato' }}</h2>
          <form class="contact-form">
            <div class="form-group">
              <label>Nome</label>
              <input type="text" class="form-input" placeholder="Seu nome" />
            </div>
            <div class="form-group">
              <label>Email</label>
              <input type="email" class="form-input" placeholder="seu@email.com" />
            </div>
            <div class="form-group">
              <label>Telefone</label>
              <input type="tel" class="form-input" placeholder="(11) 1234-5678" />
            </div>
            <div class="form-group">
              <label>Mensagem</label>
              <textarea class="form-input" rows="5" placeholder="Sua mensagem..."></textarea>
            </div>
            <button type="submit" class="submit-button">
              {{ section.config['submitButtonText'] || 'Enviar' }}
            </button>
          </form>
        </div>
      </div>

      <!-- Footer Component -->
      <div *ngIf="section.component_type === 'footer'" class="component-footer">
        <div class="container">
          <div class="footer-content">
            <div class="footer-column">
              <h3>{{ section.config['companyName'] }}</h3>
              <p>{{ section.config['address'] }}</p>
            </div>
            <div class="footer-column">
              <h4>Contato</h4>
              <p>{{ section.config['phone'] }}</p>
              <p>{{ section.config['email'] }}</p>
            </div>
          </div>
          <div class="footer-bottom">
            <p>&copy; {{ getCurrentYear() }} {{ section.config['companyName'] }}. Todos os direitos reservados.</p>
          </div>
        </div>
      </div>

      <!-- Stats Section Component -->
      <div *ngIf="section.component_type === 'stats-section'" class="component-stats">
        <div class="container">
          <div class="stats-grid">
            <div *ngFor="let stat of section.config['stats']" class="stat-item">
              <div class="stat-value">{{ stat.value }}</div>
              <div class="stat-label">{{ stat.label }}</div>
            </div>
          </div>
        </div>
      </div>

      <!-- Divider Component -->
      <div *ngIf="section.component_type === 'divider'" class="component-divider">
        <hr [style.border-width]="section.config['thickness']" [style.border-style]="section.config['style']" />
      </div>

      <!-- Spacer Component -->
      <div *ngIf="section.component_type === 'spacer'" class="component-spacer" [style.height]="section.config['height']">
      </div>

      <!-- CTA Button Component -->
      <div *ngIf="section.component_type === 'cta-button'" class="component-cta">
        <div class="container" [style.text-align]="section.config['alignment']">
          <a [href]="section.config['link']" class="cta-button" [class]="'size-' + section.config['size']">
            {{ section.config['text'] }}
          </a>
        </div>
      </div>

      <!-- Default fallback for other components -->
      <div *ngIf="!['header', 'hero', 'text-block', 'property-grid', 'contact-form', 'footer', 'stats-section', 'divider', 'spacer', 'cta-button'].includes(section.component_type)" class="component-placeholder">
        <div class="container">
          <p>Componente: {{ section.component_type }}</p>
          <small>Este componente será renderizado aqui</small>
        </div>
      </div>
    </div>
  </div>
</div>
