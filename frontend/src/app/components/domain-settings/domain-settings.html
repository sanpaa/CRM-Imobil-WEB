<div class="domain-settings">
  <div class="header">
    <h1>ğŸŒ Gerenciamento de DomÃ­nios</h1>
    <button class="btn-add" (click)="showAddDomainForm = !showAddDomainForm">
      â• Adicionar DomÃ­nio
    </button>
  </div>

  <div *ngIf="showAddDomainForm" class="add-domain-form">
    <h3>Novo DomÃ­nio</h3>
    <div class="form-group">
      <label>DomÃ­nio Principal</label>
      <input 
        type="text" 
        [(ngModel)]="newDomain.domain" 
        placeholder="exemplo.com.br"
        class="form-input"
      />
    </div>
    <div class="form-group">
      <label>SubdomÃ­nio (opcional)</label>
      <input 
        type="text" 
        [(ngModel)]="newDomain.subdomain" 
        placeholder="www"
        class="form-input"
      />
    </div>
    <div class="form-actions">
      <button (click)="addDomain()" class="btn-primary">Adicionar</button>
      <button (click)="showAddDomainForm = false" class="btn-secondary">Cancelar</button>
    </div>
  </div>

  <div class="domains-container">
    <div class="domains-list">
      <h2>DomÃ­nios Configurados</h2>
      
      <div *ngIf="domains.length === 0" class="empty-state">
        <p>Nenhum domÃ­nio configurado ainda.</p>
        <p>Clique em "Adicionar DomÃ­nio" para comeÃ§ar.</p>
      </div>

      <div 
        *ngFor="let domain of domains" 
        class="domain-item"
        [class.selected]="selectedDomain?.id === domain.id"
        (click)="selectDomain(domain)"
      >
        <div class="domain-info">
          <div class="domain-name">
            <span *ngIf="domain.subdomain">{{ domain.subdomain }}.</span>{{ domain.domain }}
          </div>
          <div class="domain-badges">
            <span class="status-badge">
              {{ getStatusIcon(domain.status) }} {{ getStatusText(domain.status) }}
            </span>
            <span *ngIf="domain.is_primary" class="primary-badge">â­ Principal</span>
            <span *ngIf="domain.ssl_enabled" class="ssl-badge">ğŸ”’ SSL</span>
          </div>
        </div>
        <div class="domain-actions">
          <button 
            *ngIf="domain.status === 'pending'" 
            (click)="verifyDomain(domain); $event.stopPropagation()"
            class="btn-verify"
          >
            âœ… Verificar
          </button>
          <button 
            *ngIf="domain.status === 'verified' && !domain.ssl_enabled" 
            (click)="enableSSL(domain); $event.stopPropagation()"
            class="btn-ssl"
          >
            ğŸ”’ Habilitar SSL
          </button>
          <button 
            *ngIf="!domain.is_primary && domain.status === 'active'" 
            (click)="setPrimary(domain); $event.stopPropagation()"
            class="btn-primary-small"
          >
            â­ Definir Principal
          </button>
          <button 
            (click)="deleteDomain(domain); $event.stopPropagation()"
            class="btn-delete"
          >
            ğŸ—‘ï¸
          </button>
        </div>
      </div>
    </div>

    <div class="domain-details" *ngIf="selectedDomain">
      <h2>ConfiguraÃ§Ã£o de DNS</h2>
      
      <div class="info-box">
        <h3>ğŸ“‹ InstruÃ§Ãµes</h3>
        <p>Para ativar seu domÃ­nio personalizado, configure os seguintes registros DNS no painel do seu provedor:</p>
      </div>

      <div class="dns-records">
        <div *ngFor="let record of dnsInstructions" class="dns-record">
          <div class="record-header">
            <span class="record-type">{{ record.type }}</span>
          </div>
          <div class="record-field">
            <label>Host</label>
            <div class="copy-field">
              <input type="text" [value]="record.host" readonly class="form-input" />
              <button (click)="copyToClipboard(record.host)" class="btn-copy">ğŸ“‹</button>
            </div>
          </div>
          <div class="record-field">
            <label>Valor</label>
            <div class="copy-field">
              <input type="text" [value]="record.value" readonly class="form-input" />
              <button (click)="copyToClipboard(record.value)" class="btn-copy">ğŸ“‹</button>
            </div>
          </div>
          <div class="record-field">
            <label>TTL</label>
            <input type="text" [value]="record.ttl" readonly class="form-input" />
          </div>
        </div>
      </div>

      <div class="info-box warning">
        <h3>âš ï¸ Importante</h3>
        <ul>
          <li>A propagaÃ§Ã£o DNS pode levar de 1 a 48 horas</li>
          <li>ApÃ³s configurar, aguarde alguns minutos e clique em "Verificar"</li>
          <li>O SSL serÃ¡ configurado automaticamente apÃ³s a verificaÃ§Ã£o</li>
          <li><strong>IMPORTANTE:</strong> VocÃª tambÃ©m deve adicionar este domÃ­nio manualmente no painel do Netlify/Vercel</li>
        </ul>
      </div>

      <div class="info-box">
        <h3>ğŸš€ Netlify/Vercel</h3>
        <p>Depois de configurar o DNS, vocÃª precisa:</p>
        <ol>
          <li>Acessar o painel do Netlify ou Vercel</li>
          <li>Ir em "Domain settings" ou "Domains"</li>
          <li>Adicionar o domÃ­nio: <strong>{{ selectedDomain.subdomain ? selectedDomain.subdomain + '.' : '' }}{{ selectedDomain.domain }}</strong></li>
          <li>Aguardar a configuraÃ§Ã£o automÃ¡tica do SSL</li>
        </ol>
      </div>
    </div>
  </div>
</div>
